<% if @guest.valid? && @guest.persisted? -%>
  $('.modal').modal('toggle');
  $('.modal').find('.modal-header').empty();
  $('.modal').find('.modal-body').empty();
  $('table#guest-list').append('<%= escape_javascript(render @guest) %>');
  loadGuestStats();
<% else -%>
  $('.modal-body #error_explanation').remove();
  $('.modal-body').prepend('<%= escape_javascript(render(partial: 'shared/errors', locals: {errors: @guest.errors})) %>');
<% end -%>
